<p align="center">
  <img src="FRBCanVis_Logo.png" alt="FRBCanVis Logo" width="300"/>
</p>

# FRBCanVis: Fast Radio Burst Candidate Visualiser

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Python 3.9+](https://img.shields.io/badge/python-3.9+-blue.svg)](https://www.python.org/downloads/release/python-390/)
[![Code style: black](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/psf/black)
[![cyclopts](https://img.shields.io/badge/built%20with-cyclopts-blue.svg)](https://github.com/BrianPugh/cyclopts)

This repository contains the code to plot the fast radio burst (FRB) candidates generated by the transient search pipeline of the SPOTLIGHT project.

## About SPOTLIGHT

SPOTLIGHT (Search for Pulsars and Transients with uGMRT Low-frequency Telescope) is a project aimed at discovering new pulsars and fast radio bursts.

## Links

- **SPOTLIGHT Project Website:** [https://spotlight.ncra.tifr.res.in/](https://spotlight.ncra.tifr.res.in/)
- **SPOTLIGHT GitHub Repository:** [https://github.com/nsmspotlight](https://github.com/nsmspotlight)

## Usage

The `can_visualiser.py` script can be run in two ways:

1. **By providing the observation directory:**
   This is the recommended method. The script will automatically determine the paths to the necessary files based on the SPOTLIGHT server's directory structure.

    ```bash
    python can_visualiser.py -o <observation_directory_name>
    ```

2. **By providing the full paths to the data files:**
   This method can be used if your data is not in the standard directory structure.

    ```bash
    python can_visualiser.py -c <path_to_csv_file> -d <path_to_data_dir>
    ```

### Arguments

- `-o`, `--obs-dir`: Name of the observation directory. If provided, `--csv-file` and `--data-dir` are not needed.
- `-c`, `--csv-file`: Path to the `classification_results.csv` file. Required if `-o` is not provided.
- `-d`, `--data-dir`: Path to the root `FRBPipeData` directory, which contains the `BMxx` subdirectories. Required if `-o` is not provided.
- `-z`, `--zoom`: (Optional) If specified, the script will zoom in on the central part of the plots.

## Dependencies

The script requires the following Python packages:

- pandas
- matplotlib
- h5py
- rich
- cyclopts

You can install them using pip:

```bash
pip install pandas matplotlib h5py rich cyclopts
```

## Output

The script generates a PNG image for each candidate listed in the input CSV file. The output images are saved in a directory named `Triggered_candidates` inside the specified data directory (`--data-dir`).

Each image contains three subplots:

1. **Top Panel:** The mean pulse profile across all frequency channels.
2. **Bottom-Left Panel:** The frequency-time dynamic spectrum.
3. **Bottom-Right Panel:** The DM-time plot, i.e., the DM transform.

The filename of each output image is in the format: `<index>_<candidate_id>_<zoom_status>.png`.

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.
